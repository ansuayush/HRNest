@model IList<PMS.Hierarchy>
@{
    var Modify = clsApplicationSetting.GetSessionValue("Modify");
}

<div class="tab-main ">
    <ul id="tabs" class="nav nav-tabs " role="tablist">
        <li class="nav-item"> <a id="tab-A" href="#active-log" class="nav-link active ripplelink" data-toggle="tab" role="tab"><i class="far fa-clock"></i>Pending</a> </li>
        <li class="nav-item"> <a id="tab-B" href="#leaves" class="nav-link ripplelink" data-toggle="tab" role="tab"><i class="fas fa-edit"></i>Updated</a> </li>


    </ul>
    <div id="content" class="tab-content p-0" role="tablist">
        <div id="active-log" class="card tab-pane fade show active" role="tabpanel" aria-labelledby="tab-A">
            <div class="card-header" role="tab" id="heading-A">
                <h5 class="mb-0">
                    <a data-toggle="collapse" href="#collapse-A" aria-expanded="true" aria-controls="collapse-A">Pending  <i class="fas fa-envelope-open"></i></a>
                </h5>
            </div>

            <div id="collapse-A" class="collapse show" data-parent="#content" role="tabpanel" aria-labelledby="heading-A">



                @*@using (Ajax.BeginForm("SetHierarchy", "PMS",
                            new { src = clsApplicationSetting.EncryptQueryString(ViewBag.MenuID.ToString() + "*/PMS/SetHierarchy") },
                            new AjaxOptions { HttpMethod = "POST", OnSuccess = "OnSuccessApproveHierarchy" },
                        new { @id = "EssentialHierarchyFrom" })
                        )
                    {

                        @Html.AntiForgeryToken()*@
                @Html.EJS().Grid("FlatGrid").DataSource((List<PMS.Hierarchy>)Model.Where(x => x.Approved == 0).ToList()).GridLines(Syncfusion.EJ2.Grids.GridLine.Both).Columns(col =>
           {
               col.Field("PMS_EID").Visible(false).Add();
               col.Field("EMPCode").HeaderText("Employee Code").Width("80").Add();
               col.Field("EMPName").HeaderText("Employee Name").Width("200").Add();
               col.Field("DepartmentsName").HeaderText("Department").Width("120").Add();
               col.Field("AppraiserName").HeaderText("Appraiser").Width("200").Add();
               col.Field("CommentorsName").HeaderText("Additional Reviewers").Width("200").Add();
               col.Field("ConfirmerName").HeaderText("Confirmer").Width("200").Add();
               col.HeaderText("Action").TextAlign(Syncfusion.EJ2.Grids.TextAlign.Center).Template("#tmpAction").Width("40").Add();
           }).AllowPaging().PageSettings(page => page.PageCount(10)).Toolbar(new List<string>() { "Search" }).Created("search").Render()
                @*}*@

            </div>
        </div>

        <div id="leaves" class="card tab-pane fade" role="tabpanel" aria-labelledby="tab-B">

            <div class="card-header" role="tab" id="heading-B">
                <h5 class="mb-0"> <a class="collapsed" data-toggle="collapse" href="#collapse-B" aria-expanded="false" aria-controls="collapse-B">Approved <i class="fas fa-check"></i></a> </h5>
            </div>

            <div id="collapse-B" class="collapse" data-parent="#content" role="tabpanel" aria-labelledby="heading-B">
                @Html.EJS().Grid("FlatGrid1").DataSource((List<PMS.Hierarchy>)Model.Where(x => x.Approved == 1).ToList()).GridLines(Syncfusion.EJ2.Grids.GridLine.Both).Columns(col =>
           {
               col.Field("PMS_EID").Visible(false).Add();


               col.Field("EMPCode").HeaderText("Employee  Code").Width("80").Add();
               col.Field("EMPName").HeaderText("Employee Name").Width("200").Add();
               col.Field("DepartmentsName").HeaderText("Department").Width("120").Add();
               col.Field("AppraiserName").HeaderText("Appraiser").Width("200").Add();
               col.Field("CommentorsName").HeaderText("Additional Reviewers").Width("200").Add();
               col.Field("ConfirmerName").HeaderText("Confirmer").Width("200").Add();
               col.HeaderText("Action").TextAlign(Syncfusion.EJ2.Grids.TextAlign.Center).Template("#tmpAction").Width("40").Add();
               //col.HeaderText("Status").TextAlign(Syncfusion.EJ2.Grids.TextAlign.Center).Template("<strong class='green-clr'><i class='fas fa-user-check'></i>Verified</strong>").Width("40").Add();
           }).AllowPaging().PageSettings(page => page.PageCount(10)).Toolbar(new List<string>() { "Search" }).Created("search1").Render()

            </div>
        </div>

    </div>
</div>

<script id="tmpAction" type="text/x-template">
    ${if('@Modify' === 'True')}
    <input type="hidden" name="I" value="${PMS_EID}" />
    <input type="hidden" name="EN" value="${EMPName}" />
    <a onclick="_ModifyHierarchy(this)"><i class="fas fa-edit " aria-hidden="true"></i>  </a>
    ${/if}
</script>

<script>
	function search() {
		// Grid - > id of the Grid component you can set based on you requirement
		document.getElementById("FlatGrid_searchbar").addEventListener('keyup', function (event) {
			var value = event.target.value;
			gridObj = document.getElementById('FlatGrid').ej2_instances[0];
			gridObj.search(value)
		})
	}
	function search1() {
		// Grid - > id of the Grid component you can set based on you requirement
		document.getElementById("FlatGrid1_searchbar").addEventListener('keyup', function (event) {
			var value = event.target.value;
			gridObj = document.getElementById('FlatGrid1').ej2_instances[0];
			gridObj.search(value)
		})
	}
</script>
@(Html.EJS().ScriptManager())
