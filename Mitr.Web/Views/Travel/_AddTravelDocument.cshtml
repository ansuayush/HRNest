@model Mitr.Models.TravelDocuments

@using (Ajax.BeginForm("_AddTravelDocument", "Travel",
		new { src = ViewBag.src },
		new AjaxOptions { HttpMethod = "POST", OnSuccess = "OnAddTravelDocumentSuccess", OnBegin = "ShowLoadingDialog()" },
	new { @id = "AddTravelDocumentsFrom", enctype = "multipart/form-data" })
	)
{
	@Html.HiddenFor(model => model.TravelDocID)
<div class="row">
	<div class="col-lg-4 form-group">
		@{
			List<SelectListItem> BookBylist = new List<SelectListItem>
{
												new SelectListItem{Text="Select",Value="" },
													new SelectListItem{Text="Staff",Value="Staff" },
													new SelectListItem{Text="Travel Agent",Value="Travel Agent" },
								new SelectListItem{Text="Travel Desk/Office Card",Value="Travel Desk/Office Card" },

									new SelectListItem{Text="Travel Desk/Other Card",Value="Travel Desk/Other Card" }

								};
		}
		<label>Booked By<sup>*</sup></label>
		@Html.DropDownListFor(model => model.BookedBy, new SelectList(BookBylist, "Value", "text", Model.BookedBy), new { @class = "form-control applyselect " })
		@*<select class="form-control applyselect ">
				<option>Select</option>
				<option>Travel Desk/Office Card</option>
				<option>Staff</option>
				<option>Travel Agent</option>
				<option>Travel Desk/Other Card</option>
			</select>*@
	</div>
	@if (Model.StafId > 0)
	{
		<div class="col-lg-4 form-group" id="divagent">
			<label>Staff Name<sup>*</sup></label>
			@Html.DropDownListFor(model => model.StafId, new SelectList(@ViewBag.emplist, "ID", "Name"), "select", new { @class = "form-control applyselect" })
		</div>
	}
	else
	{
		<div class="col-lg-4 form-group" id="divagent" style="display:none">
			<label>Staff Name<sup>*</sup></label>
			@Html.DropDownListFor(model => model.StafId, new SelectList(@ViewBag.emplist, "ID", "Name"), "select", new { @class = "form-control applyselect" })
		</div>
	}
	@if ((Model.AgentName != "" || Model.AgentName != null) && Model.StafId == 0 && Model.BookedBy == "Travel Agent")
	{
		<div class="col-lg-4 form-group" id="divstaff">
			<label>Agent Name<sup>*</sup></label>
			@Html.TextBoxFor(model => model.AgentName, new { @class = "form-control", @placeholder = "Enter" })
		</div>
	}
	else
	{
		<div class="col-lg-4 form-group" id="divstaff" style="display:none">
			<label>Agent Name<sup>*</sup></label>
			@Html.TextBoxFor(model => model.AgentName, new { @class = "form-control", @placeholder = "Enter" })
		</div>
	}

	<div class="col-lg-4 form-group">
		<label>Document Type<sup>*</sup></label>
		@Html.TextBoxFor(model => model.DocumentType, new { @class = "form-control", @placeholder = "Enter" })
		@Html.ValidationMessageFor(model => model.DocumentType, "", new { @class = "text-danger" })
	</div>

	<div class="col-lg-4 form-group">
		<label>Transaction Date <sup>*</sup></label>
		@Html.TextBoxFor(model => model.TransactionDate, new { @class = "form-control", @type = "date" })
		@Html.ValidationMessageFor(model => model.TransactionDate, "", new { @class = "text-danger" })

	</div>
	@if (Model.TravelDocID > 0)
	{
		<div class="col-lg-4 form-group">
			<label>Upload Attachment <sup>*</sup></label>
			@Html.TextBoxFor(model => model.UploadAttachment, new { @class = "form-control", @type = "file" })
			@Html.HiddenFor(model => model.AttachmentID)


		</div>
	}
	else
	{
		<div class="col-lg-4 form-group">
			<label>Upload Attachment <sup>*</sup></label>
			@Html.TextBoxFor(model => model.UploadAttachment, new { @class = "form-control", @type = "file" })
			@Html.ValidationMessageFor(model => model.UploadAttachment, "", new { @class = "text-danger" })


		</div>
	}
	@if (Model.TravelDocID > 0 && Model.BookedBy == "Travel Agent")
	{
		<div class="col-lg-4 form-group">
			<label>Bill No/Credit no<sup>*</sup> </label>
			@Html.TextBoxFor(model => model.BillNo, new { @class = "form-control" })
			@Html.ValidationMessageFor(model => model.BillNo, "", new { @class = "text-danger" })
		</div>
		<div class="col-lg-4 form-group">
			<label>Bill Date <sup>*</sup> </label>
			@Html.TextBoxFor(model => model.BillDate, new { @class = "form-control", @type = "date" })
			@Html.ValidationMessageFor(model => model.BillDate, "", new { @class = "text-danger" })
		</div>
	}
	@if (Model.TravelDocID > 0 && (Model.BookedBy == "Travel Desk/Other Card"))
	{
		<div class="col-lg-4 form-group" id="divsharedetails">
			<label>Share Details(Card No & Bank Name) <sup>*</sup></label>
			@Html.TextBoxFor(model => model.CardandBank, new { @class = "form-control" })
			@Html.ValidationMessageFor(model => model.CardandBank, "", new { @class = "text-danger" })

		</div>
	}
	else
	{
		<div class="col-lg-4 form-group" id="divsharedetails" style="display:none">
			<label>Share Details(Card No & Bank Name)<sup>*</sup></label>
			@Html.TextBoxFor(model => model.CardandBank, new { @class = "form-control" })
			@Html.ValidationMessageFor(model => model.CardandBank, "", new { @class = "text-danger" })

		</div>
	}
	<div class="col-lg-4 form-group">
		<label>Amount </label>
		@Html.TextBoxFor(model => model.Amount, new { @class = "form-control" })
		@Html.ValidationMessageFor(model => model.Amount, "", new { @class = "text-danger" })

	</div>






	@if (Model.TravelDocID > 0)
	{
		<div class="col-lg-4 form-group">
			<label>Refund Amount</label>
			@Html.TextBoxFor(model => model.RefundAmount, new { @class = "form-control" })
			@Html.ValidationMessageFor(model => model.RefundAmount, "", new { @class = "text-danger" })

		</div>
	}




	<div class="col-lg-12 text-center form-group">
		<button type="submit" name="Command" value="Add" class="btn mtr-o-grn btn-l ripplelink "><i class="fa fa-paper-plane"></i>Submit</button>
		<button type="button" id="btnclose" class="btn cnl-btn ripplelink  pull-right" data-dismiss="modal"><i class="fas fa-times"></i> Close</button>
	</div>
</div>
}


<script>
	$("#BookedBy").change(function () {
		debugger;
		var selectedVal = $('#BookedBy option:selected').attr('value');
		if (selectedVal == "Travel Agent") {
			$("#divagent").hide();
			$("#divstaff").show();
			$("#divsharedetails").hide();
		
		}
		else if (selectedVal == "Staff") {
			$("#divagent").show();
			$("#divstaff").hide();
			$("#divsharedetails").hide();
			
		}
		else if (selectedVal == "Travel Desk/Other Card") {
			$("#divagent").hide();
			$("#divstaff").hide();
			$("#divsharedetails").show();

		}
		else {
			$("#divagent").hide();
			$("#divstaff").hide();
			$("#divsharedetails").hide();
		
		}

	});



</script>
