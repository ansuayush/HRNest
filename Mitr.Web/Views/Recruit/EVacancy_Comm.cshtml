@model EXRecruit.Vacancy.Comm
@{
	string MenuID = ViewBag.MenuID.ToString();
}
<div class="inner-main mb-5 pb-0">
	<h1 class="heading-one ">Drafting Announcement of Programme Officer</h1>

	@{ Html.RenderAction("_EViewRequests", "Recruit", new { src = clsApplicationSetting.EncryptQueryString(MenuID + " */Recruit/_EViewRequests*" + ViewBag.REC_ReqID + "*N") }); }



	<h2 class="header-two"><i class="fas fa-bullhorn"></i>Vacancy Announcement</h2>

			@using (Ajax.BeginForm("EVacancy_Comm", "Recruit",
		new { src = ViewBag.src },
		new AjaxOptions { HttpMethod = "POST", OnSuccess = "EVacancyCommSuccess", OnBegin = "ShowLoadingDialog();", OnFailure = "CloseLoadingDialog();" },
		new
		{
			@id = "EVacancy_CommFrom",
			enctype = "multipart/form-data"
		})
		)
			{
				@Html.HiddenFor(x => Model.REC_EVacancyID)
				@Html.HiddenFor(x => Model.REC_ReqID)
				<div class="row">
					<div class="col-lg-3 col-md-4 col-sm-6  form-group">
						<label>Announcement Attachment</label>
						<p>@Html.ShowAttachment(Model.HRAttachID.ToString(), "green-clr")</p>
					</div>

					<div class="col-lg-3 col-md-4 col-sm-6  form-group">
						<label>Attach Announcement</label>
						@Html.HiddenFor(x => Model.HRAttachID)
						@Html.HiddenFor(x => Model.CommHRAttachID)
						@if (Model.btnVisible)
						{
							@Html.TextBoxFor(x => Model.Upload, new { @class = "form-control", @type = "file" })
							@Html.ValidationMessageFor(up => Model.Upload, "", new { @class = "text-danger" })

							if (Model.CommHRAttachID > 0)
							{
								<p>@Html.ShowAttachment(Model.CommHRAttachID.ToString(), "")</p>
							}

						}
						else
						{
							<p>@Html.ShowAttachment(Model.CommHRAttachID.ToString(), "")</p>

						}

					</div>
					<div class="col-lg-12  form-group">
						<label>Vacancy Description for Website Announcement</label>
						@Html.TextAreaFor(x => Model.CommVacancyDes, new { @class = "form-control",@cols="4" })
						@Html.ValidationMessageFor(up => Model.CommVacancyDes, "", new { @class = "text-danger" })
					</div>
				</div>
				<div class="row">

					<div class="col-lg-12 text-center mt-2">
						@if (Model.btnVisible)
						{
							<button type="submit" id="btnSave" class="btn mtr-o-grn btn-l ripplelink pull-right cancel" name="Command" value="Save"><i class="fas fa-save"></i>Save</button>
							<button type="submit" class="btn mtr-o-grn btn-l ripplelink pull-right" name="Command" value="Submit"><i class="fas fa-share"></i>Forward for Signoff</button>
						}
						@Html.CreateAnchor(MenuID, "/Recruit/ECommRequests", "Back", "btn cnl-btn btn-l ripplelink", "Click to go back", "fas fa-arrow-left", "")

					</div>
				</div>
			}

		</div>

	@section scripts    {

		@System.Web.Optimization.Scripts.Render("~/bundle/unobtrusivejs")
		@Html.IncludeVersionedJs(Url.Content("~/assets/design/Scripts/AddInit.js"))

		<script>

			$('#btnSave').click(function () {
				$(this).closest('form').data("validator").cancelSubmit = true;
				return true;
			});


			function EVacancyCommSuccess(obj) {

				if (obj.Status) {
					SuccessToaster(obj.SuccessMessage);
					window.location.href = obj.RedirectURL;
				}
				else {
					CloseLoadingDialog();
					FailToaster(obj.SuccessMessage);
				}
			}

			function ProjectTaggingSuccess(obj) {

				if (obj.Status) {
					SuccessToaster(obj.SuccessMessage);
					window.location.reload();
				}
				else {
					CloseLoadingDialog();
					FailToaster(obj.SuccessMessage);
				}
			}
		</script>
	}
