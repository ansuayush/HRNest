@using Mitr.ModelsMasterHelper;
@model IList<LeaveNonMITRAdd>
@{
	DateTime SelectedDate = ViewBag.SelectedDate;
	DateTime StartDate = new DateTime(SelectedDate.Year, SelectedDate.Month, 1);
	DateTime EndDate = StartDate.AddMonths(1).AddDays(-1);
	List<HolidayDailyLogNonMitr> lstHoliday = new List<HolidayDailyLogNonMitr>();
	var lst = (List<HolidayDailyLogNonMitr>)ViewBag.HolidayList;
	lst = lst.ToList();
	lstHoliday = (List<HolidayDailyLogNonMitr>)ViewBag.HolidayList;
	//holiday = holiday.;
	//var lstHoliday = from emp in holiday.AsEnumerable()
	//				 select new
	//				 {
	//					 HolidayType = emp.Field<string>("HolidayType"),
	//					 Name = emp.Field<string>("Name"),
	//					 Color = emp.Field<string>("Color"),
	//					 Class = emp.Field<string>("ClassName"),
	//					 Empid = emp.Field<long>("Empid"),
	//					 Date = emp.Field<string>("Date"),
	//					 DayNo = emp.Field<string>("DayNo")
	//				 };
	string MonthYear = StartDate.ToString("yyyy-MM");
	string[] COlor = new string[32];
	string[] HolidayType = new string[32];
	string[] Description = new string[32];
	string[] ClassName = new string[32];
	string[] ValidHours = new string[32];
	string[] FixHoliday = new string[32];


	//for (DateTime date = StartDate; date <= EndDate; date = date.AddDays(1))
	//{
	//    ClassName[Convert.ToInt32(date.ToString("dd"))] = (FixHolidays.Contains(date.ToString("dddd")) ? "fixholidaycolor" : "");
	//    ValidHours[Convert.ToInt32(date.ToString("dd"))] = (FixHolidays.Contains(date.ToString("dddd")) ? "" : "validatehours");
	//    if (LeaveList.Any(x => x.Date == date.ToString("dd/MM/yyyy")))
	//    {
	//        COlor[Convert.ToInt32(date.ToString("dd"))] = LeaveList.Where(x => x.Date == date.ToString("dd/MM/yyyy")).Select(x => x.Color).FirstOrDefault();
	//        HolidayType[Convert.ToInt32(date.ToString("dd"))] = LeaveList.Where(x => x.Date == date.ToString("dd/MM/yyyy")).Select(x => x.HolidayType).FirstOrDefault();
	//        Description[Convert.ToInt32(date.ToString("dd"))] = LeaveList.Where(x => x.Date == date.ToString("dd/MM/yyyy")).Select(x => x.Description).FirstOrDefault();
	//        ClassName[Convert.ToInt32(date.ToString("dd"))] = ClassName[Convert.ToInt32(date.ToString("dd"))] + " " + LeaveList.Where(x => x.Date == date.ToString("dd/MM/yyyy")).Select(x => x.ClassName).FirstOrDefault();
	//        ValidHours[Convert.ToInt32(date.ToString("dd"))] = (string.IsNullOrEmpty(LeaveList.Where(x => x.Date == date.ToString("dd/MM/yyyy")).Select(x => x.ClassName).FirstOrDefault()) ? "validatehours" : "");
	//    }

	//}
}
@*@using (Ajax.BeginForm("_SaveLeaveNonMITR", "Leave",
	new { src = clsApplicationSetting.EncryptQueryString(ViewBag.MenuID.ToString() + "*/Leave/_SaveDailyLog*" + ViewBag.SelectedDate) },
	new AjaxOptions { HttpMethod = "POST", OnSuccess = "OnLeaveSuccess", OnBegin = "ShowLoadingDialog();", OnFailure = "CloseLoadingDialog();" },
	new
	{
		name = "_SaveLeaveNonMITRForm",
		id = "_SaveLeaveNonMITRForm",
		@class = "form-horizontal form-label-left input_mask",
		enctype = "multipart/form-data"
	}))*@

@using (Ajax.BeginForm("_SaveLeaveNonMITR", "Leave",
		  new { src = clsApplicationSetting.EncryptQueryString(ViewBag.MenuID.ToString() + "*/Leave/_SaveLeaveNonMITR") },
		   new AjaxOptions { HttpMethod = "POST", OnSuccess = "OnLeaveSuccess", OnBegin = "ShowLoadingDialog();", OnFailure = "CloseLoadingDialog();" },
	   new
	   {
		   name = "_SaveLeaveNonMITR",
		   id = "_SaveLeaveNonMITR",
		   @class = "form-horizontal form-label-left input_mask",
		   enctype = "multipart/form-data"
	   }))
{

	<div class="table-scrollable">

		<table class="table tv-top table-scroll act-table" id="tblLeaveApply">
			<thead>
				<tr>
					<th class="text-center" width="33" data-toggle="tooltip" title="" data-original-title="Select All" data-placement="right" aria-describedby="tooltip211254">
						<input type="checkbox" id="selectall" class="selectall" name="AdvanceRequired">
						<label for="selectall" class="selectall"></label>
					</th>
					<th><div class="w-110">Employee Name</div></th>
					<th class="text-left"><div class="w-110">Leave Type</div></th>
					<th class="text-center">Opening Hrs</th>
					<th class="text-center">Accrued Hrs</th>
					@{ int arr = 0; }
					@for (DateTime date = StartDate; date <= EndDate; date = date.AddDays(1))
					{
						arr = arr + 1;
						<th class="text-center" width="25">@Convert.ToInt32(date.ToString("dd")) <span> @date.ToString("ddd") </span></th>
						FixHoliday[arr] = @date.ToString("dddd");
					}
					<th class="text-center">Availed Hrs</th>
					<th class="text-center">Balance Hrs</th>
				</tr>
			</thead>
			<tbody>
				@if (Model != null)
				{
					int count = 0, EmpidOld = 0, EmpidNew = 0, rowspan = 1;
					string AttacmemntTemp = "";
					for (int i = 0; i < Model.Count; i++)
					{
						AttacmemntTemp = Model[i].Empid.ToString() + "_" + Model[i].LeaveTypeID.ToString();

						@Html.HiddenFor(x => x[i].EmpName)
						@Html.HiddenFor(x => x[i].LeaveTypeID)
						@Html.HiddenFor(x => x[i].LeaveDate)
						@Html.HiddenFor(x => x[i].FixHoliday)
						@Html.HiddenFor(x => x[i].Opening)
						<input type="hidden" name="[@i].IsAttachment" id="@AttacmemntTemp" value="@Model[i].IsAttachment" />
						EmpidNew = Convert.ToInt32(Model[i].Empid);
						count++;
			<tr class="@(EmpidNew != EmpidOld?"border-top":"") ">
				@Html.HiddenFor(x => x[i].Empid, new { @Class = "hfempid" })
				@if (EmpidNew != EmpidOld)
				{
					rowspan = Model.Where(n => n.Empid == EmpidNew).ToList().Count;
					for (DateTime date = StartDate; date <= EndDate; date = date.AddDays(1))
					{
						//ClassName[Convert.ToInt32(date.ToString("dd"))] = (Model.LstDailyLog[i].FixHoliday.Contains(date.ToString("dddd")) ? "fixholidaycolor" : "");

						if (lstHoliday.Any(x => x.Date == date.ToString("dd/MM/yyyy") && (x.Empid == EmpidNew || x.Empid == 0)))
						{
							COlor[Convert.ToInt32(date.ToString("dd"))] = lstHoliday.Where(x => x.Date == date.ToString("dd/MM/yyyy") && (x.Empid == EmpidNew || x.Empid == 0)).Select(x => x.Color).FirstOrDefault();
							ClassName[Convert.ToInt32(date.ToString("dd"))] = ClassName[Convert.ToInt32(date.ToString("dd"))] + " " + lstHoliday.Where(x => x.Date == date.ToString("dd/MM/yyyy") && (x.Empid == EmpidNew || x.Empid == 0)).Select(x => x.ClassName).FirstOrDefault();

						}
						else
						{
							COlor[Convert.ToInt32(date.ToString("dd"))] = "";
							ClassName[Convert.ToInt32(date.ToString("dd"))] = "";
						}

					}
					<td class="text-center top" rowspan="@rowspan">
						<input type="hidden" value="0" name="@Html.NameFor(x => Model[i].isSelect)" id="[@i].isSelect" class="isSelect" />
						<input type="checkbox" id="l_@i" name="l_@i" class="selectedId">
						<label for="l_@i" class="m-0"></label>
					</td>
					<td rowspan="@rowspan" class="top"><strong>@Model[i].EmpName</strong></td>
				}
				<td>
					@Model[i].LeaveName

					@if (Model[i].LeaveTypeID == 1)
					{
						@*Model[i].LeaveAttachmentList = AttachList;
				for (int A = 0; A < Model[i].LeaveAttachmentList.Count; A++)
				{
					@Html.HiddenFor(model => Model[i].LeaveAttachmentList[A].AttachmentType)
				  //  @Html.TextBoxFor(model => Model[i].LeaveAttachmentList[A].UploadFile, new { @class = "form-control uploadCertificate", Type = "file" })
				}*@

						<a href="" id="att" data-toggle="modal" onclick="AttachmentNonMitr('@Model[i].Id','@Model[i].Empid','@Model[i].LeaveTypeID')" class="pull-right"><i class="fas fa-paperclip green-clr" data-toggle="tooltip" data-original-title="Attachment"></i></a>
					}
				</td>
				<td class="text-center">@Model[i].Opening</td>
				<td class="text-center">@Model[i].Accrued</td>
				@{
					long LeaveBal = 0;
					LeaveBal = Convert.ToInt64(Model[i].Prevbalance);


					//LeaveBal = Convert.ToInt64(Model[i].Opening) + Convert.ToInt64(Model[i].Accrued);
				}
				@Html.HiddenFor(x => x[i].Balance)
				@Html.HiddenFor(x => x[i].Availed)
				@Html.HiddenFor(x => x[i].Prevbalance)
				<td>
					@*<input type="number" @(Model[i].FixHoliday.Contains(FixHoliday[1]) || Model[i].Day1 > 0 ? "readonly" : "") id="@Html.IdFor(x => Model[i].Day1)" name="@Html.NameFor(x => Model[i].Day1)" class="text-center form-control hrinp @(Model[i].FixHoliday.Contains(FixHoliday[1])?"":"rowselect rowselectsingle_"+Model[i].Empid+"") dayshours_1" onfocus="if(this.value == '0') { this.value=''}" onblur="if(this.value==''){this.value='0'} else{CheckLeaveHours(this)}" value="@Model[i].Day1">*@
					<input type="number" readonly id="@Html.IdFor(x => Model[i].Day1)" name="@Html.NameFor(x => Model[i].Day1)" class="text-center form-control hrinp @(Model[i].FixHoliday.Contains(FixHoliday[1]) || Model[i].DOJ > Convert.ToDateTime(MonthYear +"-01") || Model[i].LastWorkingDay < Convert.ToDateTime(MonthYear +"-01") || ClassName[1].Contains("holiday")?"":"rowselect rowselectsingle_"+Model[i].Empid+"") dayshours_1" onfocus="if(this.value == '0') { this.value=''}" onblur="if(this.value=='0'){this.value=''} else{CheckLeaveHours(this,@LeaveBal)}" value="@(Convert.ToString(Model[i].Day1)=="0"?"":Model[i].Day1.ToString())">
				</td>
				<td>
					<input type="number" readonly id="@Html.IdFor(x => Model[i].Day2)" name="@Html.NameFor(x => Model[i].Day2)" class="text-center form-control hrinp @(Model[i].FixHoliday.Contains(FixHoliday[2]) || Model[i].DOJ> Convert.ToDateTime(MonthYear +"-02") || Model[i].LastWorkingDay < Convert.ToDateTime(MonthYear +"-02") || ClassName[2].Contains("holiday")?"":"rowselect rowselectsingle_"+Model[i].Empid+"") dayshours_2" onfocus="if(this.value == '0') { this.value=''}" onblur="if(this.value=='0'){this.value=''} else{CheckLeaveHours(this,@LeaveBal)}" value="@(Convert.ToString(Model[i].Day2)=="0"?"":Model[i].Day2.ToString())">
				</td>
				<td>
					<input type="number" readonly id="@Html.IdFor(x => Model[i].Day3)" name="@Html.NameFor(x => Model[i].Day3)" class="text-center form-control hrinp @(Model[i].FixHoliday.Contains(FixHoliday[3]) || Model[i].DOJ > Convert.ToDateTime(MonthYear +"-03") || Model[i].LastWorkingDay < Convert.ToDateTime(MonthYear +"-03") || ClassName[3].Contains("holiday")?"":"rowselect rowselectsingle_"+Model[i].Empid+"") dayshours_3" onfocus="if(this.value == '0') { this.value=''}" onblur="if(this.value=='0'){this.value=''} else{CheckLeaveHours(this,@LeaveBal)}" value="@(Convert.ToString(Model[i].Day3)=="0"?"":Model[i].Day3.ToString())">
				</td>
				<td>
					<input type="number" readonly id="@Html.IdFor(x => Model[i].Day4)" name="@Html.NameFor(x => Model[i].Day4)" class="text-center form-control hrinp @(Model[i].FixHoliday.Contains(FixHoliday[4]) || Model[i].DOJ > Convert.ToDateTime(MonthYear +"-04") || Model[i].LastWorkingDay < Convert.ToDateTime(MonthYear +"-04") || ClassName[4].Contains("holiday")?"":"rowselect rowselectsingle_"+Model[i].Empid+"") dayshours_4" onfocus="if(this.value == '0') { this.value=''}" onblur="if(this.value=='0'){this.value=''} else{CheckLeaveHours(this,@LeaveBal)}" value="@(Convert.ToString(Model[i].Day4)=="0"?"":Model[i].Day4.ToString())">
				</td>
				<td>
					<input type="number" readonly id="@Html.IdFor(x => Model[i].Day5)" name="@Html.NameFor(x => Model[i].Day5)" class="text-center form-control hrinp @(Model[i].FixHoliday.Contains(FixHoliday[5])|| Model[i].DOJ > Convert.ToDateTime(MonthYear +"-05") || Model[i].LastWorkingDay < Convert.ToDateTime(MonthYear +"-05") || ClassName[5].Contains("holiday")?"":"rowselect rowselectsingle_"+Model[i].Empid+"") dayshours_5" onfocus="if(this.value == '0') { this.value=''}" onblur="if(this.value=='0'){this.value=''} else{CheckLeaveHours(this,@LeaveBal)}" value="@(Convert.ToString(Model[i].Day5)=="0"?"":Model[i].Day5.ToString())">
				</td>
				<td>
					<input type="number" readonly id="@Html.IdFor(x => Model[i].Day6)" name="@Html.NameFor(x => Model[i].Day6)" class="text-center form-control hrinp @(Model[i].FixHoliday.Contains(FixHoliday[6])|| Model[i].DOJ > Convert.ToDateTime(MonthYear +"-06") || Model[i].LastWorkingDay < Convert.ToDateTime(MonthYear +"-06") || ClassName[6].Contains("holiday")?"":"rowselect rowselectsingle_"+Model[i].Empid+"") dayshours_6" onfocus="if(this.value == '0') { this.value=''}" onblur="if(this.value=='0'){this.value=''} else{CheckLeaveHours(this,@LeaveBal)}" value="@(Convert.ToString(Model[i].Day6)=="0"?"":Model[i].Day6.ToString())">
				</td>
				<td>
					<input type="number" readonly id="@Html.IdFor(x => Model[i].Day7)" name="@Html.NameFor(x => Model[i].Day7)" class="text-center form-control hrinp @(Model[i].FixHoliday.Contains(FixHoliday[7])|| Model[i].DOJ > Convert.ToDateTime(MonthYear +"-07") || Model[i].LastWorkingDay < Convert.ToDateTime(MonthYear +"-07") || ClassName[7].Contains("holiday")?"":"rowselect rowselectsingle_"+Model[i].Empid+"") dayshours_7" onfocus="if(this.value == '0') { this.value=''}" onblur="if(this.value=='0'){this.value=''} else{CheckLeaveHours(this,@LeaveBal)}" value="@(Convert.ToString(Model[i].Day7)=="0"?"":Model[i].Day7.ToString())">
				</td>
				<td>
					<input type="number" readonly id="@Html.IdFor(x => Model[i].Day8)" name="@Html.NameFor(x => Model[i].Day8)" class="text-center form-control hrinp @(Model[i].FixHoliday.Contains(FixHoliday[8])|| Model[i].DOJ > Convert.ToDateTime(MonthYear +"-08") || Model[i].LastWorkingDay < Convert.ToDateTime(MonthYear +"-08") || ClassName[8].Contains("holiday")?"":"rowselect rowselectsingle_"+Model[i].Empid+"") dayshours_8" onfocus="if(this.value == '0') { this.value=''}" onblur="if(this.value=='0'){this.value=''} else{CheckLeaveHours(this,@LeaveBal)}" value="@(Convert.ToString(Model[i].Day8)=="0"?"":Model[i].Day8.ToString())">
				</td>
				<td>
					<input type="number" readonly id="@Html.IdFor(x => Model[i].Day9)" name="@Html.NameFor(x => Model[i].Day9)" class="text-center form-control hrinp @(Model[i].FixHoliday.Contains(FixHoliday[9])|| Model[i].DOJ > Convert.ToDateTime(MonthYear +"-09") || Model[i].LastWorkingDay < Convert.ToDateTime(MonthYear +"-09") || ClassName[9].Contains("holiday") ?"":"rowselect rowselectsingle_"+Model[i].Empid+"") dayshours_9" onfocus="if(this.value == '0') { this.value=''}" onblur="if(this.value=='0'){this.value=''} else{CheckLeaveHours(this,@LeaveBal)}" value="@(Convert.ToString(Model[i].Day9)=="0"?"":Model[i].Day9.ToString())">
				</td>
				<td>
					<input type="number" readonly id="@Html.IdFor(x => Model[i].Day10)" name="@Html.NameFor(x => Model[i].Day10)" class="text-center form-control hrinp @(Model[i].FixHoliday.Contains(FixHoliday[10])|| Model[i].DOJ > Convert.ToDateTime(MonthYear +"-10") || Model[i].LastWorkingDay < Convert.ToDateTime(MonthYear +"-10") || ClassName[10].Contains("holiday") ?"":"rowselect rowselectsingle_"+Model[i].Empid+"") dayshours_10" onfocus="if(this.value == '0') { this.value=''}" onblur="if(this.value=='0'){this.value=''} else{CheckLeaveHours(this,@LeaveBal)}" value="@(Convert.ToString(Model[i].Day10)=="0"?"":Model[i].Day10.ToString())">
				</td>
				<td>
					<input type="number" readonly id="@Html.IdFor(x => Model[i].Day11)" name="@Html.NameFor(x => Model[i].Day11)" class="text-center form-control hrinp @(Model[i].FixHoliday.Contains(FixHoliday[11])|| Model[i].DOJ > Convert.ToDateTime(MonthYear +"-11") || Model[i].LastWorkingDay < Convert.ToDateTime(MonthYear +"-11") || ClassName[11].Contains("holiday")?"":"rowselect rowselectsingle_"+Model[i].Empid+"") dayshours_11" onfocus="if(this.value == '0') { this.value=''}" onblur="if(this.value=='0'){this.value=''} else{CheckLeaveHours(this,@LeaveBal)}" value="@(Convert.ToString(Model[i].Day11)=="0"?"":Model[i].Day11.ToString())">
				</td>
				<td>
					<input type="number" readonly id="@Html.IdFor(x => Model[i].Day12)" name="@Html.NameFor(x => Model[i].Day12)" class="text-center form-control hrinp @(Model[i].FixHoliday.Contains(FixHoliday[12])|| Model[i].DOJ > Convert.ToDateTime(MonthYear +"-12") || Model[i].LastWorkingDay < Convert.ToDateTime(MonthYear +"-12") || ClassName[12].Contains("holiday")?"":"rowselect rowselectsingle_"+Model[i].Empid+"") dayshours_12" onfocus="if(this.value == '0') { this.value=''}" onblur="if(this.value=='0'){this.value=''} else{CheckLeaveHours(this,@LeaveBal)}" value="@(Convert.ToString(Model[i].Day12)=="0"?"":Model[i].Day12.ToString())">
				</td>
				<td>
					<input type="number" readonly id="@Html.IdFor(x => Model[i].Day13)" name="@Html.NameFor(x => Model[i].Day13)" class="text-center form-control hrinp @(Model[i].FixHoliday.Contains(FixHoliday[13])|| Model[i].DOJ > Convert.ToDateTime(MonthYear +"-13") || Model[i].LastWorkingDay < Convert.ToDateTime(MonthYear +"-13") || ClassName[13].Contains("holiday")?"":"rowselect rowselectsingle_"+Model[i].Empid+"") dayshours_13" onfocus="if(this.value == '0') { this.value=''}" onblur="if(this.value=='0'){this.value=''} else{CheckLeaveHours(this,@LeaveBal)}" value="@(Convert.ToString(Model[i].Day13)=="0"?"":Model[i].Day13.ToString())">
				</td>
				<td>
					<input type="number" readonly id="@Html.IdFor(x => Model[i].Day14)" name="@Html.NameFor(x => Model[i].Day14)" class="text-center form-control hrinp @(Model[i].FixHoliday.Contains(FixHoliday[14])|| Model[i].DOJ > Convert.ToDateTime(MonthYear +"-14") || Model[i].LastWorkingDay < Convert.ToDateTime(MonthYear +"-14") || ClassName[14].Contains("holiday")?"":"rowselect rowselectsingle_"+Model[i].Empid+"") dayshours_14" onfocus="if(this.value == '0') { this.value=''}" onblur="if(this.value=='0'){this.value=''} else{CheckLeaveHours(this,@LeaveBal}" value="@(Convert.ToString(Model[i].Day14)=="0"?"":Model[i].Day14.ToString())">
				</td>
				<td>
					<input type="number" readonly id="@Html.IdFor(x => Model[i].Day15)" name="@Html.NameFor(x => Model[i].Day15)" class="text-center form-control hrinp @(Model[i].FixHoliday.Contains(FixHoliday[15])|| Model[i].DOJ > Convert.ToDateTime(MonthYear +"-15") || Model[i].LastWorkingDay < Convert.ToDateTime(MonthYear +"-15") || ClassName[15].Contains("holiday")?"":"rowselect rowselectsingle_"+Model[i].Empid+"") dayshours_15" onfocus="if(this.value == '0') { this.value=''}" onblur="if(this.value=='0'){this.value=''} else{CheckLeaveHours(this,@LeaveBal)}" value="@(Convert.ToString(Model[i].Day15)=="0"?"":Model[i].Day15.ToString())">
				</td>
				<td>
					<input type="number" readonly id="@Html.IdFor(x => Model[i].Day16)" name="@Html.NameFor(x => Model[i].Day16)" class="text-center form-control hrinp @(Model[i].FixHoliday.Contains(FixHoliday[16])|| Model[i].DOJ > Convert.ToDateTime(MonthYear +"-16") || Model[i].LastWorkingDay < Convert.ToDateTime(MonthYear +"-16") || ClassName[16].Contains("holiday")?"":"rowselect rowselectsingle_"+Model[i].Empid+"") dayshours_16" onfocus="if(this.value == '0') { this.value=''}" onblur="if(this.value=='0'){this.value=''} else{CheckLeaveHours(this,@LeaveBal)}" value="@(Convert.ToString(Model[i].Day16)=="0"?"":Model[i].Day16.ToString())">
				</td>
				<td>
					<input type="number" readonly id="@Html.IdFor(x => Model[i].Day17)" name="@Html.NameFor(x => Model[i].Day17)" class="text-center form-control hrinp @(Model[i].FixHoliday.Contains(FixHoliday[17])|| Model[i].DOJ > Convert.ToDateTime(MonthYear +"-17") || Model[i].LastWorkingDay < Convert.ToDateTime(MonthYear +"-17") || ClassName[17].Contains("holiday")?"":"rowselect rowselectsingle_"+Model[i].Empid+"") dayshours_17" onfocus="if(this.value == '0') { this.value=''}" onblur="if(this.value=='0'){this.value=''} else{CheckLeaveHours(this,@LeaveBal}" value="@(Convert.ToString(Model[i].Day17)=="0"?"":Model[i].Day17.ToString())">
				</td>
				<td>
					<input type="number" readonly id="@Html.IdFor(x => Model[i].Day18)" name="@Html.NameFor(x => Model[i].Day18)" class="text-center form-control hrinp @(Model[i].FixHoliday.Contains(FixHoliday[18])|| Model[i].DOJ > Convert.ToDateTime(MonthYear +"-18") || Model[i].LastWorkingDay < Convert.ToDateTime(MonthYear +"-18") || ClassName[18].Contains("holiday")?"":"rowselect rowselectsingle_"+Model[i].Empid+"") dayshours_18" onfocus="if(this.value == '0') { this.value=''}" onblur="if(this.value=='0'){this.value=''} else{CheckLeaveHours(this,@LeaveBal)}" value="@(Convert.ToString(Model[i].Day18)=="0"?"":Model[i].Day18.ToString())">
				</td>
				<td>
					<input type="number" readonly id="@Html.IdFor(x => Model[i].Day19)" name="@Html.NameFor(x => Model[i].Day19)" class="text-center form-control hrinp @(Model[i].FixHoliday.Contains(FixHoliday[19])|| Model[i].DOJ > Convert.ToDateTime(MonthYear +"-19") || Model[i].LastWorkingDay < Convert.ToDateTime(MonthYear +"-19") || ClassName[19].Contains("holiday")?"":"rowselect rowselectsingle_"+Model[i].Empid+"") dayshours_19" onfocus="if(this.value == '0') { this.value=''}" onblur="if(this.value=='0'){this.value=''} else{CheckLeaveHours(this,@LeaveBal)}" value="@(Convert.ToString(Model[i].Day19)=="0"?"":Model[i].Day19.ToString())">
				</td>
				<td>
					<input type="number" readonly id="@Html.IdFor(x => Model[i].Day20)" name="@Html.NameFor(x => Model[i].Day20)" class="text-center form-control hrinp @(Model[i].FixHoliday.Contains(FixHoliday[20])|| Model[i].DOJ > Convert.ToDateTime(MonthYear +"-20") || Model[i].LastWorkingDay < Convert.ToDateTime(MonthYear +"-20") || ClassName[20].Contains("holiday")?"":"rowselect rowselectsingle_"+Model[i].Empid+"") dayshours_20" onfocus="if(this.value == '0') { this.value=''}" onblur="if(this.value=='0'){this.value=''} else{CheckLeaveHours(this,@LeaveBal)}" value="@(Convert.ToString(Model[i].Day20)=="0"?"":Model[i].Day20.ToString())">
				</td>
				<td>
					<input type="number" readonly id="@Html.IdFor(x => Model[i].Day21)" name="@Html.NameFor(x => Model[i].Day21)" class="text-center form-control hrinp @(Model[i].FixHoliday.Contains(FixHoliday[21])|| Model[i].DOJ > Convert.ToDateTime(MonthYear +"-21") || Model[i].LastWorkingDay < Convert.ToDateTime(MonthYear +"-21") || ClassName[21].Contains("holiday")?"":"rowselect rowselectsingle_"+Model[i].Empid+"") dayshours_21" onfocus="if(this.value == '0') { this.value=''}" onblur="if(this.value=='0'){this.value=''} else{CheckLeaveHours(this,@LeaveBal)}" value="@(Convert.ToString(Model[i].Day21)=="0"?"":Model[i].Day21.ToString())">
				</td>
				<td>
					<input type="number" readonly id="@Html.IdFor(x => Model[i].Day22)" name="@Html.NameFor(x => Model[i].Day22)" class="text-center form-control hrinp @(Model[i].FixHoliday.Contains(FixHoliday[22])|| Model[i].DOJ > Convert.ToDateTime(MonthYear +"-22") || Model[i].LastWorkingDay < Convert.ToDateTime(MonthYear +"-22") || ClassName[22].Contains("holiday")?"":"rowselect rowselectsingle_"+Model[i].Empid+"") dayshours_22" onfocus="if(this.value == '0') { this.value=''}" onblur="if(this.value=='0'){this.value=''} else{CheckLeaveHours(this,@LeaveBal)}" value="@(Convert.ToString(Model[i].Day22)=="0"?"":Model[i].Day22.ToString())">
				</td>
				<td>
					<input type="number" readonly id="@Html.IdFor(x => Model[i].Day23)" name="@Html.NameFor(x => Model[i].Day23)" class="text-center form-control hrinp @(Model[i].FixHoliday.Contains(FixHoliday[23])|| Model[i].DOJ > Convert.ToDateTime(MonthYear +"-23") || Model[i].LastWorkingDay < Convert.ToDateTime(MonthYear +"-23") || ClassName[23].Contains("holiday")?"":"rowselect rowselectsingle_"+Model[i].Empid+"") dayshours_23" onfocus="if(this.value == '0') { this.value=''}" onblur="if(this.value=='0'){this.value=''} else{CheckLeaveHours(this,@LeaveBal)}" value="@(Convert.ToString(Model[i].Day23)=="0"?"":Model[i].Day23.ToString())">
				</td>
				<td>
					<input type="number" readonly id="@Html.IdFor(x => Model[i].Day24)" name="@Html.NameFor(x => Model[i].Day24)" class="text-center form-control hrinp @(Model[i].FixHoliday.Contains(FixHoliday[24])|| Model[i].DOJ > Convert.ToDateTime(MonthYear +"-24") || Model[i].LastWorkingDay < Convert.ToDateTime(MonthYear +"-24") || ClassName[24].Contains("holiday")?"":"rowselect rowselectsingle_"+Model[i].Empid+"") dayshours_24" onfocus="if(this.value == '0') { this.value=''}" onblur="if(this.value=='0'){this.value=''} else{CheckLeaveHours(this,@LeaveBal)}" value="@(Convert.ToString(Model[i].Day24)=="0"?"":Model[i].Day24.ToString())">
				</td>
				<td>
					<input type="number" readonly id="@Html.IdFor(x => Model[i].Day25)" name="@Html.NameFor(x => Model[i].Day25)" class="text-center form-control hrinp @(Model[i].FixHoliday.Contains(FixHoliday[25])|| Model[i].DOJ > Convert.ToDateTime(MonthYear +"-25") || Model[i].LastWorkingDay < Convert.ToDateTime(MonthYear +"-25") || ClassName[25].Contains("holiday")?"":"rowselect rowselectsingle_"+Model[i].Empid+"") dayshours_25" onfocus="if(this.value == '0') { this.value=''}" onblur="if(this.value=='0'){this.value=''} else{CheckLeaveHours(this,@LeaveBal)}" value="@(Convert.ToString(Model[i].Day25)=="0"?"":Model[i].Day25.ToString())">
				</td>
				<td>
					<input type="number" readonly id="@Html.IdFor(x => Model[i].Day26)" name="@Html.NameFor(x => Model[i].Day26)" class="text-center form-control hrinp @(Model[i].FixHoliday.Contains(FixHoliday[26])|| Model[i].DOJ > Convert.ToDateTime(MonthYear +"-26") || Model[i].LastWorkingDay < Convert.ToDateTime(MonthYear +"-26") || ClassName[26].Contains("holiday")?"":"rowselect rowselectsingle_"+Model[i].Empid+"") dayshours_26" onfocus="if(this.value == '0') { this.value=''}" onblur="if(this.value=='0'){this.value=''} else{CheckLeaveHours(this,@LeaveBal)}" value="@(Convert.ToString(Model[i].Day26)=="0"?"":Model[i].Day26.ToString())">
				</td>
				<td>
					<input type="number" readonly id="@Html.IdFor(x => Model[i].Day27)" name="@Html.NameFor(x => Model[i].Day27)" class="text-center form-control hrinp @(Model[i].FixHoliday.Contains(FixHoliday[27])|| Model[i].DOJ > Convert.ToDateTime(MonthYear +"-27") || Model[i].LastWorkingDay < Convert.ToDateTime(MonthYear +"-27") || ClassName[27].Contains("holiday")?"":"rowselect rowselectsingle_"+Model[i].Empid+"") dayshours_27" onfocus="if(this.value == '0') { this.value=''}" onblur="if(this.value=='0'){this.value=''} else{CheckLeaveHours(this,@LeaveBal)}" value="@(Convert.ToString(Model[i].Day27)=="0"?"":Model[i].Day27.ToString())">
				</td>
				<td>
					<input type="number" readonly id="@Html.IdFor(x => Model[i].Day28)" name="@Html.NameFor(x => Model[i].Day28)" class="text-center form-control hrinp @(Model[i].FixHoliday.Contains(FixHoliday[28])|| Model[i].DOJ > Convert.ToDateTime(MonthYear +"-28") || Model[i].LastWorkingDay < Convert.ToDateTime(MonthYear +"-28") || ClassName[28].Contains("holiday")?"":"rowselect rowselectsingle_"+Model[i].Empid+"") dayshours_28" onfocus="if(this.value == '0') { this.value=''}" onblur="if(this.value=='0'){this.value=''} else{CheckLeaveHours(this,@LeaveBal)}" value="@(Convert.ToString(Model[i].Day28)=="0"?"":Model[i].Day28.ToString())">
				</td>
				@if (EndDate.Day >= 29)
				{
					<td>
						<input type="number" readonly id="@Html.IdFor(x => Model[i].Day29)" name="@Html.NameFor(x => Model[i].Day29)" class="text-center form-control hrinp @(Model[i].FixHoliday.Contains(FixHoliday[29])|| Model[i].DOJ > Convert.ToDateTime(MonthYear +"-29") || Model[i].LastWorkingDay < Convert.ToDateTime(MonthYear +"-29") || ClassName[29].Contains("holiday")?"":"rowselect rowselectsingle_"+Model[i].Empid+"") dayshours_29" onfocus="if(this.value == '0') { this.value=''}" onblur="if(this.value=='0'){this.value=''} else{CheckLeaveHours(this,@LeaveBal)}" value="@(Convert.ToString(Model[i].Day29)=="0"?"":Model[i].Day29.ToString())">
					</td>
				}
				@if (EndDate.Day >= 30)
				{
					<td>
						<input type="number" readonly id="@Html.IdFor(x => Model[i].Day30)" name="@Html.NameFor(x => Model[i].Day30)" class="text-center form-control hrinp @(Model[i].FixHoliday.Contains(FixHoliday[30])|| Model[i].DOJ > Convert.ToDateTime(MonthYear +"-30") || Model[i].LastWorkingDay < Convert.ToDateTime(MonthYear +"-30") || ClassName[30].Contains("holiday")?"":"rowselect rowselectsingle_"+Model[i].Empid+"") dayshours_30" onfocus="if(this.value == '0') { this.value=''}" onblur="if(this.value=='0'){this.value=''} else{CheckLeaveHours(this,@LeaveBal)}" value="@(Convert.ToString(Model[i].Day30)=="0"?"":Model[i].Day30.ToString())">
					</td>
				}
				@if (EndDate.Day >= 31)
				{
					<td>
						<input type="number" readonly id="@Html.IdFor(x => Model[i].Day31)" name="@Html.NameFor(x => Model[i].Day31)" class="text-center form-control hrinp @(Model[i].FixHoliday.Contains(FixHoliday[31])|| Model[i].DOJ > Convert.ToDateTime(MonthYear +"-31") || Model[i].LastWorkingDay < Convert.ToDateTime(MonthYear +"-31") || ClassName[31].Contains("holiday")?"":"rowselect rowselectsingle_"+Model[i].Empid+"") dayshours_31" onfocus="if(this.value == '0') { this.value=''}" onblur="if(this.value=='0'){this.value=''} else{CheckLeaveHours(this,@LeaveBal)}" value="@(Convert.ToString(Model[i].Day31)=="0"?"":Model[i].Day31.ToString())">
					</td>
				}
				<td class="text-center">@Model[i].Availed</td>
				<td class="text-center"><strong>@Model[i].Balance</strong></td>

			</tr>
						EmpidOld = EmpidNew;
					}
				}
			</tbody>
		</table>
	</div>
	<div class="text-center mt-3">
		<button type="submit" class="btn mtr-o-grn btnNext" onclick="FnChekBlankDays()" id="btnSubmit" name="Command" value="Save">Save & Next <i class="fas fa-angle-double-right m-0"></i></button>
		<a href="/Dashboard" onclick="ShowLoadingDialog();" class="btn cnl-btn ripplelink btnNext"><i class="fas fa-times"></i>Close</a>
	</div>

}
<script type="text/javascript">
    $(document).ready(function () {
        $('.rowselect').prop('readonly', true);
        $('.selectall').click(function () {
            var ischecked = 0;
            if (this.checked)
            {
                ischecked = 1;
                $('.rowselect').prop('readonly', false);
            }
            else {
                $('.rowselect').prop('readonly', true);
            }
            $('.isSelect').val(ischecked);
            $('.selectedId').prop('checked', this.checked);
        });

        $('.selectedId').change(function () {
            var ischecked = 0;
            var Empid = "rowselectsingle_" + $(this).closest("tr").find('.hfempid').val();
            if (this.checked)
            {
                ischecked = 1;
               // $(this).closest("tr").find('.rowselect').prop('readonly', false);
                //$(this).closest("tr").find("." + Empid + "").prop('readonly', false);
                $("." + Empid + "").prop('readonly', false);
            }
            else
            {
                //$(this).closest("tr").find('.rowselect').prop('readonly', true);
                $("." + Empid + "").prop('readonly', true);
            }
            $(this).closest("tr").find(".isSelect").val(ischecked);
            var check = ($('.selectedId').filter(":checked").length == $('.selectedId').length);
            $('.selectall').prop("checked", check);
        });
    });
    function AttachmentCLSL(rowno) {
        // e.preventDefault();
        // e.stopPropagation();
        //var L = $(this).closest("div").find("input:hidden[name=L]").val();
        // $("#hdnLeaveID").val(L);
        $("#hfAttachmentNo").val(rowno);
        $("#Modalcl").modal('show');
    }
    function SaveAttachment()
    {
        var AttachmentNo = $("#hfAttachmentNo").val();
        var fu1 = "[" + AttachmentNo + "].LeaveAttachmentList[0].UploadFile";
        var fu2 = "[" + AttachmentNo + "].LeaveAttachmentList[1].UploadFile";
        $("#txtPhysical").attr("id", fu1);


    }
    function AttachmentNonMitr(id,Empid,Leaveid) {
        var Month = $("#Month").val();

        if (Empid == undefined)
        {
            return;
        }
			$.ajax({
                url: "/Leave/_LeaveAttachmentNonMitr",
				type: "Get",
                data: { src: EncryptQueryStringJSON(@ViewBag.MenuID+"*" + "/Leave/_LeaveAttachmentNonMitr" + "*" + Empid + "*" + Leaveid + "*" + Month + "*" + id) },
                success: function (data)
                {

                    //alert(data);
                $("#TagetDivLeaveAttachment1").empty();
                    $("#TagetDivLeaveAttachment1").html(data);
                $("#Modalcllll").modal("show");
                //    var form = $("form")
                //        .removeData("validator")
                //        .removeData("unobtrusiveValidation");
                //    $.validator.unobtrusive.parse(form);

                },
                error: function (er) {
                alert(er);

                }
                });
    }
    function FnChekBlankDays() {
        var dayval = 0;
      $('#tblLeaveApply  TBODY TR').each(function (i) {

          $(this).closest("tr").find(".hrinp").each(function () {
              if ($(this).val() == "") {
                  $(this).val(0);
              }
          });
        });
    }
</script>