
@{
	ViewBag.Title = "AddSallaryBudget";
	Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="inner-main mb-5">
	<div class="row">
		<div class="col-sm-12">
			<h1 class="heading-one mb-3">Add Salary</h1>
		</div>

		<div class="col-sm-2 wf-575 form-group">
			<label>Staff Name   </label>
			@Html.DropDownList("ddlemp", new SelectList(@ViewBag.EmpList, "Id", "Name"), "select", new { @class = "form-control applyselect" })

			

		</div>
		<div class="col-sm-3 wf-575 align-self-center">
			<a href="" class="btn mtr-g-grn btn-l " onclick="Showemplist()" data-toggle="modal" data-target="#viewdetail"><i class="fas fa-plus"></i>Add </a>
		</div>

		<div class="col-sm-12 text-right form-group">
			<strong>Project Total Cost (INR) <span class="green-clr"> <i class="fas fa-rupee-sign ml-1"></i>16,94,790</span></strong>


		</div>
	</div>
	<div class="table-responsive">
		<table class="table mt-0">
			<thead>
				<tr>
					<th class="w-200" rowspan="3">Staff Name</th>
					<th class="w-200" rowspan="3">Designation</th>
					<th class="w-80 text-left" rowspan="3">Location </th>
					<th class="w-80 text-left" rowspan="3">Employment Category </th>
					<th class="w-80 text-left" rowspan="3">Sub Category</th>
					<th class="text-center" rowspan="3"> Hours </th>
					<th class="text-left" rowspan="3">
						Month<br />
						Wise
					</th>
					<th class="w-50 text-left" rowspan="3">
						Indirect<br />
						Cost %
					</th>
					<th class="text-center" colspan="2"> 2020-21</th>
					<th class="text-center" colspan="2">2021-22	</th>
					<th class=" text-center" colspan="2">2022-23</th>
					<th></th>
				</tr>
				<tr>
					<th>Upto March</th>
					<th>After March</th>
					<th>Upto March</th>
					<th>After March</th>
					<th>Upto March</th>
					<th>After March</th>
					<th></th>
				</tr>
				<tr>
					<th class="text-center" colspan="2">Percentage </th>
					<th class="text-center" colspan="2">Percentage</th>
					<th class="text-center" colspan="2">Percentage</th>
					<th></th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td>Sanjay Paul</td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td class="text-right"></td>
					<td class="text-center"><a href="" data-toggle="modal" data-target="#udtbudget" onclick="Updateemplist()" data-toggle="tooltip" title="Update"><i class="fas fa-edit m-0 green-clr" data-toggle="tooltip" title="Update"></i></a></td>
					<td class="text-right"></td>
					<td class="text-right"></td>
					<td class="text-right"></td>
					<td class="text-right"></td>
					<td class="text-right"></td>
					<td class="text-right"></td>
					<td class="text-right"></td>
					<td></td>
				</tr>
				<tr>
					<td>Manju</td>
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td class="text-right"></td>
					<td class="text-center"></td>
					<td class="text-right">15%</td>
					<td class="text-right">15%</td>
					<td class="text-right">15%</td>
					<td class="text-right">15%</td>
					<td class="text-right">15%</td>
					<td class="text-right">15%</td>
					<td class="text-right">15%</td>
					<td><a href="" data-toggle="modal" onclick="Showemplist()" data-target="#viewdetail" title="Update"><i class="fas fa-edit m-0 green-clr" data-toggle="tooltip" title="" data-original-title="Update"></i></a></td>
				</tr>
			</tbody>
		</table>
	</div>

	<div class="mt-3 text-center">
		<button type="submit" class="btn mtr-o-grn " name="Command" value="Add"><i class="fas fa-save"></i>Save</button>
		<button type="submit" class="btn mtr-o-grn " name="Command" value="Add" data-toggle="modal" data-target="#edr"><i class="fas fa-paper-plane"></i>Submit</button>
		<button type="submit" class="btn mtr-g-grn " name="Command" value="Add" data-toggle="modal" data-target="#dc"><i class="fas fa-file-alt"></i>Enter Outcome Wise</button>
		<button type="button" class="btn cnl-btn"><i class="fas fa-times"></i> Close</button>
	</div>
</div>

<!--- --->
<!--mailer-->
<div class="modal fade" id="viewdetail">

	<div class="modal-dialog modal-lg">
		<div class="modal-content">
			<!-- Modal Header -->
			<div class="modal-header">
				<h4 class="modal-title">Add Travel and Transportation</h4>
				<button type="button" class="close" data-dismiss="modal">×</button>
			</div>
			<div class="modal-body">
				<div id="TagetDiv"></div>
			</div>



		</div>
	</div>

</div>



<div class="modal" id="udtbudget">
	<div class="modal-dialog modal-lg">
		<div class="modal-content ">

			<!-- Modal Header -->
			<div class="modal-header">
				<h4 class="modal-title">
					Sanjay Paul <br />
					<small> Executive Director, New Delhi</small>
				</h4>
				<button type="button" class="close" data-dismiss="modal">&times;</button>
			</div>

			<!-- Modal body -->
			<div class="modal-body">
				<div id="TagetDivupdate"></div>
			</div>
		</div>
	</div>
</div>

<div class="modal fade" id="dc">
	<div class="modal-dialog modal-md">

		<div class="modal-content">
			<div style="position: relative;">
				<button type="button" class="close m-close" data-dismiss="modal">×</button>
			</div>
			<!-- Modal Header -->
			<div class="modal-body p-0">
				<div class="swal-icon"> <i class="fas fa-exclamation-triangle"></i> </div>
				<div class="swal-btn p-2 pb-3">
					<p class="text-center mb-4"><strong>Do you want to distribute total cost or staff wise cost?</strong></p>
					<div class="text-center"> <a href="" class="btn mtr-o-grn btn-l ripplelink " onclick="UpdateTotalcost()" data-toggle="modal" data-target="#tc"><i class="fas fa-rupee-sign"></i>Total Cost</a> <a href="" class="btn mtr-o-grn btn-l ripplelink " onclick="StaffWiseUpdate()" data-toggle="modal" data-target="#sw"><i class="fas fa-users"></i> Staff Wise</a> </div>
				</div>
			</div>
		</div>
	</div>
</div>

<div class="modal fade" id="sw">
	<div class="modal-dialog modal-lg">
		<div class="modal-content">
			<!-- Modal Header -->
			<div class="modal-header">
				<h4 class="modal-title">Staff Wise</h4>
				<button type="button" class="close" data-dismiss="modal">×</button>
			</div>
			<div class="modal-body">
				<div id="TagetDivstaffwise"></div>
			</div>
		</div>
	</div>
</div>
<div class="modal fade" id="tc">
	<div class="modal-dialog modal-md">
		<div class="modal-content">
			<!-- Modal Header -->
			<div class="modal-header">
				<h4 class="modal-title">Total Cost</h4>
				<button type="button" class="close" data-dismiss="modal">×</button>
			</div>
			<div class="modal-body">
				<div id="TagetDivupdatecost"></div>
			</div>
		</div>
	</div>
</div>



@section scripts    {
	@System.Web.Optimization.Scripts.Render("~/bundle/dataTablesjs")
	@System.Web.Optimization.Scripts.Render("~/bundle/unobtrusivejs")
	@Html.IncludeVersionedJs(Url.Content("~/assets/design/Scripts/AddInit.js"))
	@Html.IncludeVersionedJs(Url.Content("~/assets/design/Scripts/ToolTip.js"))
	<script type="text/javascript">
		$(document).ready(function () {
			$(".applyselect").select2();
		});
	function UpdateTotalcost() {
				var empid = "1";
			$.ajax({
				url: "/Budget/_UpdateTotalCost",
				type: "Get",
				async: true,
				data: { src: EncryptQueryStringJSON(@ViewBag.MenuID+"*" + "/Budget/_UpdateTotalCost" + "*" + empid) },
				success: function (data) {
					$("#TagetDivupdatecost").empty();
					$("#TagetDivupdatecost").html(data);


				},
				error: function (er) {
					alert(er);

				}
			});
	}
	function StaffWiseUpdate() {
				var empid = "1";
			$.ajax({
				url: "/Budget/_UpdateStaffWiseSallary",
				type: "Get",
				async: true,
				data: { src: EncryptQueryStringJSON(@ViewBag.MenuID+"*" + "/Budget/_UpdateStaffWiseSallary" + "*" + empid) },
				success: function (data) {
					$("#TagetDivstaffwise").empty();
					$("#TagetDivstaffwise").html(data);


				},
				error: function (er) {
					alert(er);

				}
			});
	}
		function Updateemplist() {
			var empid = "1";
			$.ajax({
				url: "/Budget/_UpdateStaffSallary",
				type: "Get",
				async: true,
				data: { src: EncryptQueryStringJSON(@ViewBag.MenuID+"*" + "/Budget/_UpdateStaffSallary" + "*" + empid) },
				success: function (data) {
					$("#TagetDivupdate").empty();
					$("#TagetDivupdate").html(data);


				},
				error: function (er) {
					alert(er);

				}
			});
		}
		function Showemplist(){
			debugger;
			var empid = $("#ddlemp").val();
			$.ajax({
				url: "/Budget/_AddStaffSallary",
				type: "Get",
				async: true,
				data: { src: EncryptQueryStringJSON(@ViewBag.MenuID+"*" + "/Budget/_AddStaffSallary" + "*" + empid) },
				success: function (data) {
					$("#TagetDiv").empty();
					$("#TagetDiv").html(data);


				},
				error: function (er) {
					alert(er);

				}
			});
		}


		function OnSuccess(obj) {
			if (obj.Status) {
				SuccessToaster(obj.SuccessMessage);
				window.location.href = obj.RedirectURL

			}
			else {
				CloseLoadingDialog();
				FailToaster(obj.SuccessMessage);

			}
		}
	</script>

}