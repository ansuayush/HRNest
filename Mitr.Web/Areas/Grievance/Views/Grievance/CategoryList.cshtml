@model IList<Mitr.Models.MasterAll.List>

	@section style{
	@System.Web.Optimization.Styles.Render("~/bundle/dataTablecss")
	}
	@{
	Layout = "~/Views/Shared/_Layout.cshtml";
	}
	<div class="inner-main mb-5 pb-0">
		@Html.Partial("ListHeader_Partial", "Category List")
		<div class="row">
			<div class="col-md-12 col-sm-12 col-xs-12">
				<div class="card p-0">
					<div class="card-body p-0">
						<div class="x_content table-currency mt-0">
							<div class="table-responsive">
								<table id="datatable-buttons" class="table table-striped table-bordered dt-responsive nowrap tbltick new_width m-table" style="border-collapse: collapse; border-spacing: 0; width: 100%;">
									<thead>
										<tr>
											<th >S.no.</th>
											<th>Category Name</th>
											<th>Description</th>
											<th>Inserted Date</th>
											<th>Updated Date</th>
											<th>IP Address</th>
											<th>Action</th>
										</tr>
										<tr class="searchbar">
											<th class="searchhide"></th>
											<th ></th>
											<th></th>
											<th></th>
											<th> </th>
											<th> </th>
											<th class="searchhide"></th>
										</tr>
									</thead>
									<tbody>
										@{ int Count = 0;}
										@foreach (Mitr.Models.MasterAll.List item in Model)
										{
										Count++;
										<tr class="@(item.IsActive == true ? " " : " trrowred")">
											<td>@Count</td>
											<td> @item.field_name</td>
											<td> @item.field_value</td>
											<td>@Convert.ToDateTime(item.createdat).ToString("dd-MMM-yyyy")</td>
											<td>@Convert.ToDateTime(item.modifiedat).ToString("dd-MMM-yyyy")</td>
											<td>@item.IPAddress</td>
											<td>
												<input type="hidden" name="I" value="@item.ID" />
												<input type="hidden" name="N" value="@item.field_name" />
												@if (clsApplicationSetting.GetSessionValue("Modify") == "True")
												{
												@Html.Raw(item.IsActive == true
												? "<a data-toggle='tooltip' data-original-title='Click to DeActivate' list='masterall' OP='0' class='AIsActive'> <i class='fa fa-check-circle checkgreen' aria-hidden='true'></i></a>"
												: "<a data-toggle='tooltip' data-original-title='Click to Activate' list='masterall' OP='1' class='AIsActive'> <i class='fa fa-times-circle crossred' aria-hidden='true'></i></a>")

												<a title="Edit" onclick="ListHeaderAdd(@item.ID);" data-toggle='tooltip'><i class="fas fa-edit checkgreen" aria-hidden="true"></i> </a>
												}
											</td>
										</tr>
										}
									</tbody>
								</table>
							</div>
						</div>

					</div>
				</div>

			</div>
		</div>
	</div>
	<div class="modal fade pop-dgn" id="ViewModal">
		<div class="modal-dialog modal-md">
			<div class="modal-content">

				<div class="modal-header blk-gdn-btn">
					<h4 class="modal-title"><i class="fa fa-plus"></i>Add Category </h4>
					<div class="close" data-dismiss="modal">&times;</div>
				</div>
				<!-- Modal body -->
				<div class="modal-body">
					<div id="TagetDiv"></div>
				</div>
			</div>
		</div>
	</div>


	@section scripts    {
	@System.Web.Optimization.Scripts.Render("~/bundle/dataTablesjs")
	@System.Web.Optimization.Scripts.Render("~/bundle/unobtrusivejs")
	<script src="~/assets/design/Scripts/AddInit.js"></script>
	<script>
	$('table').each(
	  function() {
	    var titles;
	 
	    titles = [];

	    $('thead th', this).each(
	    function() {
	      titles.push($(this).text());
	    });

	    
	    $('tbody tr', this).each(
	    function() {
	      
	      $('td', this).each(
	      function(index) {
	        $(this).attr('data-label', titles[index]);
	        $(this).wrapInner('<span></span>')
	      });
	    });
	  });
</script>
	<script>


		function ListHeaderAdd(CMSID) {
			if (CMSID == undefined) {
				CMSID = 0;
			}
			$.ajax({
				url: "/Grievance/_CategoryAdd",
				type: "Get",
				data: { src: EncryptQueryStringJSON(@ViewBag.MenuID+"*" + "/Grievance/_CategoryAdd" + "*" + CMSID)
		},
		success: function (data) {
			$("#TagetDiv").empty();
			$("#TagetDiv").html(data);
			$("#ViewModal").modal("show");
			var form = $("form")
				.removeData("validator")
				.removeData("unobtrusiveValidation");
			$.validator.unobtrusive.parse(form);
			$("#group_id").select2();
		},
		error: function (er) {
			alert(er);

		}
					});
					}

		function OnSuccess(obj) {
			 ;
			if (obj.Status) {
				SuccessToaster(obj.SuccessMessage);
				window.location.reload();
			}
			else {
				CloseLoadingDialog();
				FailToaster(obj.SuccessMessage);

			}
		}

	</script>
	}

